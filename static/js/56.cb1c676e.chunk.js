"use strict";(self.webpackChunkdo_app=self.webpackChunkdo_app||[]).push([[56],{56:(e,i,t)=>{t.r(i),t.d(i,{default:()=>a});var s=t(43),l=t(731),r=t(475),c=(t(298),t(120)),o=t(961),n=t(579);const a=()=>{const{books:e,fieldState:i,setSpecificBook:t,promoBookSlider:a,theme:d}=(0,s.useContext)(l.O),[u,m]=(0,s.useState)(!1),[p,f]=(0,s.useState)(!1),[h,b]=(0,s.useState)(7),v=(0,s.useRef)(null),k=(0,s.useMemo)((()=>({promo:3,Filter:3,Search:3})),[]),w=(0,s.useCallback)((()=>{const e=window.innerWidth;b(e<600?7:e<1200?12:20)}),[]);(0,s.useEffect)((()=>(w(),window.addEventListener("resize",w),()=>window.removeEventListener("resize",w))),[w]);const g=(0,s.useMemo)((()=>e.filter((e=>{var i;return(null===(i=e.Tip)||void 0===i?void 0:i.split(",").includes("promo"))&&"0"!==e.Visibility}))),[e]),M=(0,s.useMemo)((()=>new Map(e.map((e=>[e.id,e])))),[e]),S=(0,s.useMemo)((()=>(a.Filter||[]).map((e=>M.get(e))).filter((e=>e&&"0"!==e.Visibility))),[M,a.Filter]),j=(0,s.useMemo)((()=>(a.Search||[]).map((e=>M.get(e))).filter((e=>e&&"0"!==e.Visibility))),[M,a.Search]),x=(0,s.useMemo)((()=>Object.values(k).reduce(((e,i)=>e+i),0)),[k]),N=(0,s.useMemo)((()=>Math.round(k.promo/x*h)),[k,x,h]),C=(0,s.useMemo)((()=>Math.round(k.Filter/x*h)),[k,x,h]),E=(0,s.useMemo)((()=>Math.round(k.Search/x*h)),[k,x,h]),L=(0,s.useMemo)((()=>{const e=g.slice(0,N).map((e=>e.id)),i=S.slice(0,C).map((e=>e.id)),t=j.slice(0,E).map((e=>e.id));return Array.from(new Set([...e,...i,...t])).slice(0,h)}),[g,N,S,C,j,E,h]),y=e=>{const i=e.imageblockpublic?e.imageblockpublic.split(",").map((e=>(0,o.A)({folder:"img",filename:e}))):e.imageblock.split(",");return e.imagepublic?(0,o.A)({folder:"img",filename:e.imagepublic}):e.image||i[0]},z=(0,s.useCallback)((()=>{const e=v.current;e&&(m(e.scrollLeft>0),f(e.scrollLeft<e.scrollWidth-e.clientWidth))}),[]);(0,s.useEffect)((()=>{const e=v.current;return z(),window.addEventListener("resize",z),e&&e.addEventListener("scroll",z),()=>{window.removeEventListener("resize",z),e&&e.removeEventListener("scroll",z)}}),[z,L]);const A=e=>{if(v.current){const i=v.current.clientWidth;v.current.scrollBy({left:"left"===e?-i:i,behavior:"smooth"})}};return(0,n.jsxs)("div",{className:`slider-wrapper ${d}`,children:[(0,n.jsx)("div",{className:"slider-title",children:"Top Products"}),u&&(0,n.jsx)("button",{className:"scroll-button-specific left",onClick:()=>A("left"),children:"<"}),(0,n.jsx)("div",{className:"slider-container-specific",ref:v,children:L.map((e=>{var s,l;const o=M.get(e);return o?(0,n.jsxs)(r.N_,{className:"book-card-specific",to:"/specificbook",onClick:()=>(e=>{e&&t((i=>({...i,id:e})))})(o.id),children:[(0,n.jsx)(c.A,{src:y(o),alt:o.title,className:"artmini-specific"}),o.price&&(0,n.jsxs)("b",{className:"book-size",children:[o.price,null!==(s=i.payment)&&void 0!==s?s:""]}),(0,n.jsx)("div",{children:(null===(l=o.title)||void 0===l?void 0:l.length)>=12?o.title.slice(0,9)+"...":o.title})]},o.id):null}))}),p&&(0,n.jsx)("button",{className:"scroll-button-specific right",onClick:()=>A("right"),children:">"})]})}}}]);
//# sourceMappingURL=56.cb1c676e.chunk.js.map